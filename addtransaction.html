<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>PayApp - Add Transaction</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


</head>

<body>

  <!-- Navigation -->
  <div id="nav-placeholder"></div>


  <!-- Use Fontawesome for icons -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">


  <!-- Page Content# -->
  <div class="container">
    <br>
    <h3>New Transaction</h3>
    <br>
    <form>
      <div class="form-group">
        <label for="inputTitle">Title</label>
        <input type="text" class="form-control" id="inputTitle" placeholder="Enter title" required>
      </div>
      <div class="form-group">
        <label for="inputAmount">Amount</label>
        <input type="number" step="0.05" class="form-control" id="inputAmount" placeholder="Enter Amount" required>
      </div>
      <div class="form-group">
        <label for="inputPayer">Payer</label>
        <select id="inputPayer" class="form-control">
          <option>Toni</option>
          <option>M채</option>
        </select>
      </div>
      <div class="form-group">
        <label for="participantlist">Participants
            &nbsp; 
            <i class="fas fa-plus-circle" style="cursor:pointer"></i>
        </label>
        <ul class="list-group list-group-flush" id="participantlist">
          <li class="list-group-item">        
            <div class="form-check">
            <input type="checkbox" class="form-check-input" id="participant1">
            <label class="form-check-label" for="participant1">Toni</label>
            </div>
          </li>
          <li class="list-group-item">
            <div class="form-check">
            <input type="checkbox" class="form-check-input" id="participant2">
            <label class="form-check-label" for="participant2">M채</label>
            </div>
          </li>
          <li class="list-group-item">
            <div class="form-check">
            <input type="checkbox" class="form-check-input" id="participant2">
            <label class="form-check-label" for="participant2">M채</label>
            </div>
          </li>
        </ul>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

<script>
  $("#nav-placeholder").load("nav.html");

  console.log(localStorage.getItem("groupid"))

  var data = {'Toni': {'spent': 10, 'owes': 20, 'credit':-10}, 'M채': {'spent': 20, 'owes': 40, 'credit':20}};
  updateTable(data);

	function tableInnerHTML(name, spent, owes, credit) {
    var htmlText = `<tr style="cursor:pointer;" name="` + name + `"><td>` + name;
    var cellTagGreen = `</td><td class="text-success">`;
    var cellTagRed = `</td><td class="text-danger">`;
    var rowEnd = `</td></tr>`;

    balances = [spent, owes, credit];
    for (var b of balances){
      if (b >=0)
        htmlText += cellTagGreen + b;
      else
        htmlText += cellTagRed + b;
    }
    htmlText += rowEnd;

		return htmlText;
	}

	function updateTable(data){
		for (var participant in data) {
      balance = data[participant];
			$("#tablebody").append(tableInnerHTML(participant, balance['spent'], balance['owes'], balance['credit'])); 
		}
	}

	$("body").on("click", "[name='deletebutton']", function(e) {
		var groupname = $(this).parent().parent().attr("data-groupname");
		var groupid = $(this).parent().parent().attr("data-groupid");
		$("#confirmmessage").attr("data-groupid", groupid);
		$("#confirmmessage").html("are you sure you want to leave the group '" + groupname + "'?");
		$("#deletedialog").modal("show");
	});

	$("body").on("click", "tr", function(e) {
		var name = $(this).attr("name");
	});


</script>

</html>
